(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{31:function(e,t,a){e.exports=a(54)},40:function(e,t,a){},43:function(e,t){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=a(24),i=a(11),l=a(2),u=a(7),m=a(8),d=a(10),p=a(9),f=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),a}(r.a.Component),b=a(14),h=a.n(b),v=a(19),E=a(20),g=(a(40),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,n=a.id;e.setState(Object(E.a)({},n,a.value),e.activeButton)},e.activeButton=function(){var t=e.state,a=t.email,n=t.name;""!==a&&""!==n?e.setState({isDisabled:!1}):e.setState({isDisabled:!0})},e.handleClickPlayButton=function(){var t=Object(v.a)(h.a.mark((function t(a,n){var r,c,s,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,c=r.history,s=r.setUserInfo,"https://opentdb.com/api_token.php?command=request",t.prev=2,t.next=5,fetch("https://opentdb.com/api_token.php?command=request");case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,"token",localStorage.setItem("token",i.token),s({name:a,email:n}),c.push("/game"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,a){return t.apply(this,arguments)}}(),e.state={email:"",name:"",isDisabled:!0},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.name,c=t.isDisabled,s=this.props.history;return r.a.createElement("div",{className:"pageContainer"},r.a.createElement("h1",{className:"title"},"Quiz!?"),r.a.createElement("div",{className:"infoContainer"},r.a.createElement("div",{className:"loginContainer"},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{type:"email",id:"email",className:"input","data-testid":"input-gravatar-email",placeholder:"Email",autoComplete:"off",value:a,onChange:this.handleInputChange})),r.a.createElement("label",{htmlFor:"name"},r.a.createElement("input",{type:"text",id:"name",className:"input","data-testid":"input-player-name",placeholder:"Nome",autoComplete:"off",value:n,onChange:this.handleInputChange}))),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:c,onClick:function(){return e.handleClickPlayButton(n,a)}},"Play"),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:function(){return s.push("/Configura\xe7\xf5es")}},"Configura\xe7\xf5es"))))}}]),a}(r.a.Component)),y=Object(i.b)(null,(function(e){return{setUserInfo:function(t){return e(function(e){return{type:"SET_USER_INFO",userInfo:e}}(t))}}}))(g),k=a(15),O=a(21),N=a.n(O),j=a(28),C=a.n(j),S=function(e){var t=C()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)},I=function(e){return e.parentElement.parentElement.firstChild},w=(a(44),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=e.email;return r.a.createElement("div",{className:"game-header"},r.a.createElement("img",{src:S(n),alt:"user","data-testid":"header-profile-picture"}),r.a.createElement("p",{"data-testid":"header-player-name",className:"player-name"},t),r.a.createElement("div",{className:"header-score-container"},r.a.createElement("p",{"data-testid":"header-score"},a)))}}]),a}(r.a.Component)),x=Object(i.b)((function(e){return{name:e.player.name,email:e.player.gravatarEmail,score:e.player.score}}))(w),R=(a(45),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).setAsIncorrect=function(){var t=e.myRef.current,a=Object(k.a)(t.children).find((function(e){return"incorrect"===e.name}));e.changeOptionsColors(a)},e.callingAPI=Object(v.a)(h.a.mark((function t(){var a,n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),t.next=3,fetch("https://opentdb.com/api.php?amount=5&token=".concat(a));case 3:return n=t.sent,t.next=6,n.json();case 6:0===(r=t.sent).results.length?(c=e.props.history,localStorage.removeItem("token"),c.push("/")):e.setState({resultAPI:r.results},e.createRandomOptions);case 8:case"end":return t.stop()}}),t)}))),e.initializeTimer=function(){var t=e.myRef.current,a=setInterval((function(){var t=e.state.timer;e.setState({timer:t-1})}),1e3);e.setState({intervalId:a}),I(t).classList.add("bar-animation")},e.createIncorrectOption=function(t,a){return r.a.createElement("button",{type:"button","data-testid":"wrong-answer-".concat(a),key:a,onClick:function(t){return e.changeOptionsColors(t.target)},name:"incorrect",className:"answer-button",disabled:!1},N.a.decode(t))},e.createCorrectOption=function(t){return r.a.createElement("button",{type:"button",key:4,"data-testid":"correct-answer",name:"correct",className:"answer-button",onClick:function(t){return e.changeOptionsColors(t.target)},disabled:!1},N.a.decode(t))},e.createRandomOptions=function(){var t=e.state,a=t.resultAPI,n=t.questionNumber,r=e.state.shuffledOptions,c=[];a[n].incorrect_answers.forEach((function(t,a){c.push(e.createIncorrectOption(t,a))}));var s=a[n].correct_answer;c.push(e.createCorrectOption(s)),r=function(e){for(var t=e.length-1;t>0;t-=1){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}return e}(c),e.setState({shuffledOptions:r},(function(){e.setButtonsToDefault(),e.initializeTimer()}))},e.changeOptionsColors=function(t){var a=e.state.intervalId;clearInterval(a);var n=t.parentElement;Object(k.a)(n.children).forEach((function(e){"incorrect"===e.name?e.classList.add("red-border"):e.classList.add("green-border")}));var r=e.myRef.current;e.setState({isDisabled:!0},(function(){return function(e){Object(k.a)(e.children).forEach((function(e){e.disabled=!0}))}(r)}));var c="correct"===t.name;e.updateScore(c),I(r).classList.add("stop-animation")},e.updateScore=function(t){if(t){var a=e.state,n=a.timer,r=a.resultAPI,c=a.questionNumber,s=e.props.setScore,o=r[c].difficulty;switch(o){case"easy":o=1;break;case"medium":o=2;break;case"hard":o=3;break;default:o=0}s(10+n*o)}},e.setNextQuestion=function(){var t=e.state.questionNumber;t<4?e.setState({isDisabled:!1,timer:30,questionNumber:t+1},e.createRandomOptions):e.props.history.push("/feedback")},e.setButtonsToDefault=function(){var t=e.myRef.current;Object(k.a)(t.children).forEach((function(e){e.disabled=!1,e.classList.remove("red-border"),e.classList.remove("green-border")})),function(e){var t=I(e);t.classList.remove("bar-animation"),t.classList.remove("stop-animation"),function(e){e.offsetHeight}(t)}(t)},e.state={resultAPI:[],questionNumber:0,timer:30,shuffledOptions:[],isDisabled:!1,intervalId:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.callingAPI(),this.myRef=r.a.createRef()}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.timer,a=e.isDisabled;0===t&&!1===a&&this.setAsIncorrect()}},{key:"render",value:function(){var e=this.state,t=e.resultAPI,a=e.questionNumber,n=e.timer,c=e.shuffledOptions,s=e.isDisabled;return r.a.createElement("div",{className:"game-page-container"},r.a.createElement("div",{className:"quiz-container"},r.a.createElement(x,null),t.length>0&&r.a.createElement("p",{"data-testid":"question-category",className:"category"},t[a].category),r.a.createElement("div",{className:"questions-container"},r.a.createElement("div",{className:"timer-bar"}),r.a.createElement("div",{className:"timer-number"},n),t.length>0&&r.a.createElement("div",{className:"centralize-question"},r.a.createElement("p",{"data-testid":"question-text",className:"question-text"},N.a.decode(t[a].question)),r.a.createElement("div",{"data-testid":"answer-options",ref:this.myRef,className:"answer-options"},c))),s&&r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.setNextQuestion,className:"next-button"},"Next")))}}]),a}(r.a.Component)),A=Object(i.b)(null,(function(e){return{setScore:function(t){return e(function(e){return{type:"SET_SCORE",score:e}}(t))}}}))(R),D=(a(46),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleRedirectTo=function(t){var a=e.props,n=a.history,r=a.clearState;t?n.push("/".concat(t)):n.push("/"),r()},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,a=e.score,n=e.email,r={name:t,score:a,picture:S(n)};if(localStorage.getItem("ranking")){var c=JSON.parse(localStorage.getItem("ranking"));c.push(r),localStorage.setItem("ranking",JSON.stringify(c))}else localStorage.setItem("ranking",JSON.stringify([r]))}},{key:"render",value:function(){var e=this,t=this.props,a=t.assertions,n=t.score;return r.a.createElement("div",{className:"feedback-page-container"},r.a.createElement(x,null),r.a.createElement("div",{className:"feedback-container"},r.a.createElement("p",{className:"feedback-text"},a<3?r.a.createElement("span",{"data-testid":"feedback-text",className:"bad-played"},"Could be better..."):r.a.createElement("span",{"data-testid":"feedback-text",className:"well-played"},"Well Done!")),r.a.createElement("div",{className:"feedback-data-container"},r.a.createElement("div",{className:"feedback-data"},r.a.createElement("p",{className:"feedback-data-text"},"Score:"),r.a.createElement("div",{className:"feedback-data-number","data-testid":"feedback-total-score"},n)),r.a.createElement("div",{className:"feedback-data"},r.a.createElement("p",{className:"feedback-data-text"},"Assertions:"),r.a.createElement("p",{className:"feedback-data-number","data-testid":"feedback-total-question"},a))),r.a.createElement("div",{className:"buttons-container"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again",className:"feedback-button",onClick:function(){return e.handleRedirectTo()}},"Play Again"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",className:"feedback-button",onClick:function(){return e.handleRedirectTo("ranking")}},"Ranking"))))}}]),a}(r.a.Component)),q=Object(i.b)((function(e){return{assertions:e.player.assertions,score:e.player.score,name:e.player.name,email:e.player.gravatarEmail}}),(function(e){return{clearState:function(){return e({type:"CLEAR_PLAYER"})}}}))(D),L=(a(47),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).getLocalStorage=function(){var t=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score}));e.setState({playerInfos:t})},e.HandleClickBackToLogin=function(){e.props.history.push("/")},e.state={playerInfos:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getLocalStorage()}},{key:"render",value:function(){var e=this,t=this.state.playerInfos;return r.a.createElement("section",null,r.a.createElement("div",{"data-testid":"ranking-title",className:"ranking-title"},r.a.createElement("h3",null,"Ranking")),r.a.createElement("div",{className:"box"},t.map((function(e,t){return r.a.createElement("div",{className:"list",key:t},r.a.createElement("div",{className:"imgBx"},r.a.createElement("img",{src:e.picture,alt:e.name})),r.a.createElement("div",{className:"content"},r.a.createElement("h2",{className:"rank"},r.a.createElement("small",{className:"hashtag"},"#"),t+1),r.a.createElement("h4",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.score)))}))),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",className:"home-button",onClick:function(){return e.HandleClickBackToLogin()}},"Voltar para Home"))}}]),a}(r.a.Component));a(48);function T(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/trivia-react",component:y}),r.a.createElement(l.a,{path:"/game",component:A}),r.a.createElement(l.a,{path:"/Configura\xe7\xf5es",component:f}),r.a.createElement(l.a,{path:"/feedback",component:q}),r.a.createElement(l.a,{path:"/ranking",component:L})))}var P=a(16),_=a(30),B=a(12),J={name:"",assertions:0,score:0,gravatarEmail:""},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_INFO":return Object(B.a)(Object(B.a)({},e),{},{gravatarEmail:t.userInfo.email,name:t.userInfo.name});case"SET_SCORE":return Object(B.a)(Object(B.a)({},e),{},{score:e.score+t.score,assertions:e.assertions+1});case"CLEAR_PLAYER":return Object(B.a)(Object(B.a)({},e),{},{name:"",assertions:0,score:0,gravatarEmail:""});default:return e}},M=Object(P.combineReducers)({player:z}),U=Object(P.legacy_createStore)(M,Object(_.composeWithDevTools)());window.Cypress&&(window.store=U);var F=U;s.a.render(r.a.createElement(o.a,null,r.a.createElement(i.a,{store:F},r.a.createElement(T,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.5572820c.chunk.js.map